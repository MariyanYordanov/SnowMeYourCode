/* 
   3-Column Adaptive Exam Layout System
   Files Explorer | Monaco Editor | DevTools Panel
   FIXED VERSION - Working Toggle States
*/

/* =================================
   CSS VARIABLES FOR LAYOUT
   ================================= */

:root {
    /* Grid column sizes */
    --files-panel-width: 250px;
    --devtools-panel-width: 400px;
    --min-editor-width: 500px;

    /* Transitions */
    --panel-transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* =================================
   MAIN EXAM CONTAINER - FIXED GRID
   ================================= */

.exam-container {
    display: grid;
    grid-template-areas:
        "header header header"
        "files editor devtools"
        "footer footer footer";

    /* Default: All panels visible */
    grid-template-columns: var(--files-panel-width) 1fr var(--devtools-panel-width);
    grid-template-rows: 50px 1fr 40px;

    height: 100vh;
    background: var(--editor-bg);
    color: var(--editor-text);
    overflow: hidden;
    transition: grid-template-columns var(--panel-transition);
}

/* =================================
   TOGGLE STATES - WORKING VERSION
   ================================= */

/* Hide Files Panel */
.exam-container.hide-files {
    grid-template-columns: 0 1fr var(--devtools-panel-width);
}

.exam-container.hide-files .files-panel {
    overflow: hidden;
    opacity: 0;
}

/* Hide DevTools Panel */
.exam-container.hide-devtools {
    grid-template-columns: var(--files-panel-width) 1fr 0;
}

.exam-container.hide-devtools .devtools-panel {
    overflow: hidden;
    opacity: 0;
}

/* Editor Only Mode */
.exam-container.editor-only {
    grid-template-columns: 0 1fr 0;
}

.exam-container.editor-only .files-panel,
.exam-container.editor-only .devtools-panel {
    overflow: hidden;
    opacity: 0;
}

/* Show Both Side Panels */
.exam-container.show-both {
    grid-template-columns: var(--files-panel-width) 1fr var(--devtools-panel-width);
}

/* DevTools Focus Mode */
.exam-container.focus-devtools {
    grid-template-columns: 150px 1fr 600px;
}

/* Files Focus Mode */
.exam-container.focus-files {
    grid-template-columns: 400px 1fr 250px;
}

/* =================================
   GRID AREAS ASSIGNMENT
   ================================= */

.exam-header {
    grid-area: header;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 var(--spacing-xl);
    background: var(--editor-panel-bg);
    border-bottom: 1px solid var(--editor-border);
    z-index: 10;
}

.files-panel {
    grid-area: files;
    background: var(--editor-panel-bg);
    border-right: 1px solid var(--editor-border);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: opacity var(--panel-transition);
}

.editor-panel {
    grid-area: editor;
    display: flex;
    flex-direction: column;
    background: var(--editor-bg);
    min-width: 0;
    position: relative;
    height: 100%;
    overflow: hidden;
}

.devtools-panel {
    grid-area: devtools;
    background: var(--editor-panel-bg);
    border-left: 1px solid var(--editor-border);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: opacity var(--panel-transition);
}

.exam-footer {
    grid-area: footer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 var(--spacing-xl);
    background: var(--editor-panel-bg);
    border-top: 1px solid var(--editor-border);
    font-size: var(--font-sm);
    color: var(--text-muted);
    z-index: 10;
}

/* =================================
   LAYOUT CONTROLS
   ================================= */

.layout-controls {
    display: flex;
    gap: var(--spacing-sm);
    align-items: center;
}

.layout-btn {
    padding: 6px 12px;
    background: transparent;
    border: 1px solid var(--editor-border);
    border-radius: 4px;
    color: var(--text-muted);
    font-size: var(--font-xs);
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 4px;
}

.layout-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--editor-text);
    border-color: var(--primary-color);
}

.layout-btn.active {
    background: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}

/* Toggle specific buttons */
#toggle-files::before {
    content: 'üìÅ';
}

#toggle-devtools::before {
    content: 'üõ†Ô∏è';
}

#layout-mode::before {
    content: '‚öôÔ∏è';
}

/* =================================
   RESPONSIVE ADJUSTMENTS
   ================================= */

@media (max-width: 1200px) {
    :root {
        --files-panel-width: 200px;
        --devtools-panel-width: 350px;
    }

    .exam-container.focus-devtools {
        grid-template-columns: 0 1fr 500px;
    }

    .exam-container.focus-files {
        grid-template-columns: 350px 1fr 0;
    }
}

@media (max-width: 900px) {

    /* Force single panel on small screens */
    .exam-container {
        grid-template-columns: 0 1fr 0 !important;
    }

    .layout-controls {
        display: none;
    }
}

/* =================================
   PANEL RESIZE HANDLES
   ================================= */

.resize-handle {
    position: absolute;
    background: transparent;
    cursor: col-resize;
    z-index: 20;
    transition: background 0.2s;
}

.resize-handle:hover {
    background: var(--primary-color);
}

.resize-handle-left {
    left: -3px;
    top: 0;
    bottom: 0;
    width: 6px;
}

.resize-handle-right {
    right: -3px;
    top: 0;
    bottom: 0;
    width: 6px;
}

/* =================================
   SMOOTH ANIMATIONS
   ================================= */

.panel-enter {
    animation: slideIn 0.3s ease-out;
}

.panel-exit {
    animation: slideOut 0.3s ease-in;
}

@keyframes slideIn {
    from {
        transform: translateX(-100%);
        opacity: 0;
    }

    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOut {
    from {
        transform: translateX(0);
        opacity: 1;
    }

    to {
        transform: translateX(-100%);
        opacity: 0;
    }
}