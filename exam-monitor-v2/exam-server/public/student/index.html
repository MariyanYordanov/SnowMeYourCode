<!DOCTYPE html>
<html lang="bg">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Exam Monitor - Student Interface</title>

    <!-- External Dependencies -->
    <script src="/socket.io/socket.io.js"></script>

    <!-- CSS - Modular Import System -->
    <link rel="stylesheet" href="/student/css/styles.css">

    <!-- Monaco Editor CDN -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/editor/editor.main.css">

    <!-- Monaco Loader -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>

    <!-- Monaco Configuration -->
    <script>
        // Configure Monaco paths
        require.config({
            paths: {
                'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs'
            }
        });

        // –ì–ª–æ–±–∞–ª–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –∑–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ Monaco –µ –≥–æ—Ç–æ–≤
        window.waitForMonaco = function (callback) {
            if (typeof monaco !== 'undefined') {
                callback();
            } else {
                require(['vs/editor/editor.main'], function () {
                    callback();
                });
            }
        };
    </script>
</head>

<body>
    <!-- Main Application Container -->
    <div id="app-container" class="app-container">
        <!-- Login Component Container -->
        <div id="login-component" class="component-container">
            <!-- Login Form Template - Clean, Modular Component -->
            <div class="login-container">
                <!-- Terms Section - Left Column -->
                <div class="terms-section">
                    <div class="terms-header">
                        <h3>–£—Å–ª–æ–≤–∏—è –Ω–∞ –∏–∑–ø–∏—Ç–∞</h3>
                    </div>

                    <!-- Terms Content -->
                    <div class="terms-content">
                        <div class="terms-text">
                            <h4>–ê–í–¢–û–ú–ê–¢–ò–ß–ù–û –ü–†–ï–ö–†–ê–¢–Ø–í–ê–ù–ï –ü–†–ò:</h4>
                            <ul class="violation-list">
                                <li><strong>–ò–∑–ª–∏–∑–∞–Ω–µ –æ—Ç fullscreen —Ä–µ–∂–∏–º</strong></li>
                                <li><strong>–°–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ–∑–æ—Ä–µ—Ü–∞</strong> –Ω–∞ –∏–∑–ø–∏—Ç–∞</li>
                                <li><strong>–ü—Ä–µ–≤–∫–ª—é—á–≤–∞–Ω–µ –∫—ä–º –¥—Ä—É–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</strong> –∏–ª–∏ –ø—Ä–æ–∑–æ—Ä—Ü–∏</li>
                                <li><strong>–ö–æ–ø–∏—Ä–∞–Ω–µ/–ø–æ—Å—Ç–∞–≤—è–Ω–µ –Ω–∞ –∫–æ–¥</strong> –æ—Ç –≤—ä–Ω—à–Ω–∏ –∏–∑—Ç–æ—á–Ω–∏—Ü–∏</li>
                                <li><strong>–î–û–ö–û–°–í–ê–ù–ï –ù–ê –ï–ö–†–ê–ù–ê</strong> (touch events)</li>
                            </ul>

                            <!-- CRITICAL: Touch Policy Section -->
                            <div class="no-touch-policy">
                                <h4>–í–ê–ñ–ù–û: TOUCH –í–ó–ê–ò–ú–û–î–ï–ô–°–¢–í–ò–ï –ó–ê–ë–†–ê–ù–ï–ù–û</h4>
                                <div class="touch-policy-content">
                                    <p><strong>–í–°–Ø–ö–û –î–û–ö–û–°–í–ê–ù–ï === –ê–í–¢–û–ú–ê–¢–ò–ß–ù–û –ò–ó–ì–û–ù–í–ê–ù–ï</strong></p>
                                    <ul class="touch-rules">
                                        <li>–ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ <strong>–°–ê–ú–û –ú–ò–®–ö–ê –ò –ö–õ–ê–í–ò–ê–¢–£–†–ê</strong></li>
                                        <li>Touch screens <strong>–ù–ï –°–ê –ü–û–ó–í–û–õ–ï–ù–ò</strong></li>
                                        <li>–¢–∞–±–ª–µ—Ç–∏ –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∏ <strong>–ù–ï –°–ê –ü–û–î–•–û–î–Ø–©–ò</strong> –∑–∞ –∏–∑–ø–∏—Ç–∞</li>
                                        <li>–í—Å–µ–∫–∏ touch event —Å–µ –∑–∞—Å–∏—á–∞ <strong>–ú–û–ú–ï–ù–¢–ê–õ–ù–û</strong></li>
                                    </ul>
                                </div>
                            </div>

                            <h4>–†–∞–∑—Ä–µ—à–µ–Ω–∏ –¥–µ–π—Å—Ç–≤–∏—è:</h4>
                            <ul class="allowed-list">
                                <li><strong>–ü–∏—Å–∞–Ω–µ –Ω–∞ –∫–æ–¥</strong> –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞</li>
                                <li><strong>–ò–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –Ω–∞ –∫–æ–¥</strong> –∏ –ø—Ä–µ–≥–ª–µ–¥ –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ</li>
                                <li><strong>–§–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∫–æ–¥–∞</strong> —Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–µ–Ω–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏</li>
                                <li><strong>Developer Tools</strong> –≤ —Ä–∞–º–∫–∏—Ç–µ –Ω–∞ fullscreen —Ä–µ–∂–∏–º–∞</li>
                                <li><strong>–ú–∏—à–∫–∞ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞</strong> –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è</li>
                            </ul>

                            <!-- Platform-Specific Allowed Actions -->
                            <div class="tech-info">
                                <h5>–†–∞–∑—Ä–µ—à–µ–Ω–∏ –∫–ª–∞–≤–∏—à–∏ –∑–∞ —Å–º—è–Ω–∞ –Ω–∞ –µ–∑–∏–∫:</h5>
                                <ul class="platform-list allowed">
                                    <li><strong>Windows:</strong> Windows+Space, Alt+Shift</li>
                                    <li><strong>Mac:</strong> Cmd+Space (Spotlight), Control+Space</li>
                                    <li><strong>Linux:</strong> Super+Space, Alt+Shift (–∑–∞–≤–∏—Å–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ)</li>
                                </ul>
                            </div>

                            <div class="warning-box">
                                <strong>–í–ê–ñ–ù–û:</strong> –ü—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –∏–∑–ø–∏—Ç—ä—Ç —Å–µ –ø—Ä–µ–∫—Ä–∞—Ç—è–≤–∞ <strong>–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ</strong>
                                –±–µ–∑ –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç –∑–∞ –≤—Ä—ä—â–∞–Ω–µ! –°–∏—Å—Ç–µ–º–∞—Ç–∞ –∑–∞—Å–∏—á–∞ –≤—Å–∏—á–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ -
                                –≤–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ <strong>touch events</strong>, –∏–∑–ª–∏–∑–∞–Ω–µ –æ—Ç <strong>fullscreen</strong> –∏
                                –ø—Ä–µ–≤–∫–ª—é—á–≤–∞–Ω–µ –º–µ–∂–¥—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
                            </div>

                            <div class="info-box">
                                <strong>–î–û–ü–™–õ–ù–ò–¢–ï–õ–ù–û:</strong> –í—Ä–µ–º–µ—Ç–æ –∑–∞ –∏–∑–ø–∏—Ç–∞ –µ <strong>3 —á–∞—Å–∞</strong>.
                                –ö–æ–¥—ä—Ç —Å–µ –∑–∞–ø–∞–∑–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞ –≤—Å–µ–∫–∏ 2 —Å–µ–∫—É–Ω–¥–∏. –°–ª–µ–¥ –ø—Ä–∏–∫–ª—é—á–≤–∞–Ω–µ –Ω–∞ –∏–∑–ø–∏—Ç–∞
                                –Ω—è–º–∞ –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç –∑–∞ –≤—Ä—ä—â–∞–Ω–µ –∏–ª–∏ –ø—Ä–æ–º–µ–Ω–∏.
                            </div>

                            <div class="tech-info">
                                <strong>–¢–ï–•–ù–ò–ß–ï–°–ö–ê –ò–ù–§–û–†–ú–ê–¶–ò–Ø:</strong> –°–∏—Å—Ç–µ–º–∞—Ç–∞ –∏–∑–ø–æ–ª–∑–≤–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏ web APIs
                                –∑–∞ –¥–µ—Ç–µ–∫—Ü–∏—è –Ω–∞ <strong>fullscreen</strong> —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ –∏ <strong>touch events</strong>.
                                –†–∞–±–æ—Ç–∏ –Ω–∞ –≤—Å–∏—á–∫–∏ –º–æ–¥–µ—Ä–Ω–∏ –±—Ä–∞—É–∑—ä—Ä–∏.
                            </div>
                        </div>
                    </div>

                    <!-- Agreement Checkbox -->
                    <div class="agreement-checkbox">
                        <label class="checkbox-label">
                            <input type="checkbox" id="terms-agreement" required>
                            <span class="checkmark"></span>
                            <span class="checkbox-text">
                                –ü—Ä–æ—á–µ—Ç–æ—Ö –∏ —Å–µ <strong>—Å—ä–≥–ª–∞—Å—è–≤–∞–º —Å —É—Å–ª–æ–≤–∏—è—Ç–∞</strong> –Ω–∞ –∏–∑–ø–∏—Ç–∞.
                                –†–∞–∑–±–∏—Ä–∞–º, —á–µ –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –∏–∑–ø–∏—Ç—ä—Ç —Å–µ –ø—Ä–µ–∫—Ä–∞—Ç—è–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.
                            </span>
                        </label>
                    </div>
                </div>

                <!-- Login Form - Right Column -->
                <div class="login-form">
                    <h2>–í—Ö–æ–¥ –≤ –∏–∑–ø–∏—Ç–∞ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–Ω–µ</h2>

                    <div class="form-group">
                        <input type="text" id="student-name" placeholder="–ò–º–µ –∏ —Ñ–∞–º–∏–ª–∏—è" required>
                    </div>

                    <div class="form-group">
                        <select id="student-class" required>
                            <option value="">–ò–∑–±–µ—Ä–µ—Ç–µ –∫–ª–∞—Å</option>
                            <option value="11–ê">11–ê</option>
                            <option value="11–ë">11–ë</option>
                            <option value="12–ê">12–ê</option>
                            <option value="12–ë">12–ë</option>
                        </select>
                    </div>

                    <!-- Enhanced Login Button - –ë–ï–ó data –∞—Ç—Ä–∏–±—É—Ç–∏ -->
                    <button id="login-btn" class="btn-primary" disabled>
                        –í–ª–µ–∑ –≤ –∏–∑–ø–∏—Ç–∞
                    </button>

                    <div id="login-status" class="status-message"></div>
                </div>
            </div>
        </div>

        <!-- Exam Workspace Container -->
        <div id="exam-component" class="component-container" style="display: none;">
            <!-- Exam Workspace Component - 3-Column Layout -->
            <div class="exam-container show-both">
                <!-- Exam Header -->
                <header class="exam-header">
                    <div class="exam-info">
                        <span class="student-name">{{studentName}}</span>
                        <span class="student-class">{{studentClass}}</span>
                        <span class="session-id">{{sessionId}}</span>
                    </div>

                    <div class="exam-timer">
                        <span class="timer-label">Time left:</span>
                        <span id="exam-timer" class="timer-value">03:00:00</span>
                    </div>

                    <div class="layout-controls">
                        <button id="toggle-files" class="layout-btn active" title="Toggle Files Panel (Ctrl+1)">Files
                        </button>
                        <button id="toggle-devtools" class="layout-btn active" title="Toggle DevTools (Ctrl+2)">DevTools
                        </button>
                        <button id="layout-mode" class="layout-btn" title="Change Layout Mode (Ctrl+3)">Default
                        </button>
                    </div>

                    <div class="exam-actions">
                        <button id="finish-exam-btn" class="btn btn-danger">
                            Send
                        </button>
                    </div>
                </header>

                <!-- Files Panel (Left) -->
                <aside class="files-panel">
                    <div class="files-header">
                        <h3>Project Files</h3>
                        <div class="file-toolbar">
                            <button id="new-file-btn" class="file-action-btn new-file" title="New File">üìÑ New
                                File</button>
                            <button class="file-action-btn upload" title="Upload Files">‚¨ÜÔ∏è Upload Files</button>
                            <button class="file-action-btn refresh" title="Refresh">üîÑ Refresh</button>
                        </div>
                    </div>
                    <div class="files-content">
                        <!-- File tree will be rendered here -->
                        <div id="file-tree" class="file-tree">
                            <div class="file-tree-empty">
                                <div class="empty-folder-icon">üìÅ</div>
                                <div class="empty-title">No Project Files</div>
                                <div class="empty-subtitle">Create or upload files to start</div>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- Editor Panel (Center) -->
                <div class="editor-panel">
                    <!-- –ù–û–í–ê–¢–ê –°–¢–†–£–ö–¢–£–†–ê –° TABS -->
                    <div class="editor-header">
                        <div id="file-tabs-container" class="file-tabs-container"></div>
                        <div class="editor-actions">
                            <button id="run-btn" class="action-btn">‚ñ∂ Run</button>
                            <button id="save-btn" class="action-btn">üíæ Save</button>
                            <button id="format-btn" class="action-btn">‚ö° Format</button>
                            <button id="clear-btn" class="action-btn">üóëÔ∏è Clear</button>
                            <select id="theme-select" class="theme-select">
                                <option value="vs-dark">Dark</option>
                                <option value="vs">Light</option>
                                <option value="hc-black">High Contrast</option>
                            </select>
                        </div>
                    </div>

                    <!-- Monaco Editor Container -->
                    <div id="monaco-editor" class="monaco-container"></div>

                    <!-- Output Panel -->
                    <div class="output-panel">
                        <div class="output-tabs">
                            <button class="tab-btn active" id="console-tab">Console</button>
                            <button class="tab-btn" id="problems-tab">Problems</button>
                        </div>
                        <div class="output-content">
                            <div id="console-output" class="console-output active"></div>
                            <div id="problems-output" class="problems-output"></div>
                        </div>
                    </div>
                </div>

                <!-- DevTools Panel (Right) -->
                <aside class="devtools-panel">
                    <div class="devtools-header">
                        <h3>Exam Dev Tools</h3>
                    </div>

                    <!-- DevTools Tabs -->
                    <div class="devtools-tabs">
                        <button class="devtool-tab active" data-tab="network">
                            üìä Network
                        </button>
                        <button class="devtool-tab" data-tab="console">
                            üåê Console
                        </button>
                        <button class="devtool-tab" data-tab="elements">
                            üèóÔ∏è Elements
                        </button>
                        <button class="devtool-tab" data-tab="application">
                            üíæ Application
                        </button>
                    </div>

                    <!-- Tab Content -->
                    <div class="devtools-content">
                        <!-- Network Tab -->
                        <div class="devtool-panel active" id="network-panel">
                            <div class="network-header">
                                <button class="clear-btn">Clear</button>
                                <input type="search" placeholder="Filter requests..." class="network-filter">
                            </div>
                            <div class="network-list">
                                <div class="empty-state">
                                    <span>üåê</span>
                                    <p>No network activity yet</p>
                                </div>
                            </div>
                        </div>

                        <!-- Console Tab -->
                        <div class="devtool-panel" id="console-panel">
                            <div class="console-filters">
                                <label><input type="checkbox" checked> All</label>
                                <label><input type="checkbox" checked> Logs</label>
                                <label><input type="checkbox" checked> Errors</label>
                                <label><input type="checkbox" checked> Warnings</label>
                            </div>
                            <div class="devtools-console-output"></div>
                        </div>

                        <!-- Elements Tab -->
                        <div class="devtool-panel" id="elements-panel">
                            <div class="dom-tree">
                                <div class="empty-state">
                                    <span>üèóÔ∏è</span>
                                    <p>DOM tree will appear here</p>
                                </div>
                            </div>
                        </div>

                        <!-- Application Tab -->
                        <div class="devtool-panel" id="application-panel">
                            <div class="storage-explorer">
                                <h4>Storage</h4>
                                <details open>
                                    <summary>üç™ Cookies</summary>
                                    <div class="storage-content" id="cookies-content">
                                        <p class="empty">No cookies</p>
                                    </div>
                                </details>
                                <details>
                                    <summary>üóÑÔ∏è Local Storage</summary>
                                    <div class="storage-content" id="localstorage-content">
                                        <p class="empty">No data</p>
                                    </div>
                                </details>
                                <details>
                                    <summary>üìä Session Storage</summary>
                                    <div class="storage-content" id="sessionstorage-content">
                                        <p class="empty">No data</p>
                                    </div>
                                </details>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- Exam Footer -->
                <footer class="exam-footer">
                    <div class="footer-left">
                        <span class="connection-status">
                            <span class="status-indicator connected"></span>
                            –°–≤—ä—Ä–∑–∞–Ω
                        </span>
                        <span class="save-status">
                            –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø–∞–∑–≤–∞–Ω–µ: <span id="last-save-time">–∞–∫—Ç–∏–≤–Ω–æ</span>
                        </span>
                    </div>

                    <div class="footer-right">
                        <span class="fullscreen-status">
                            Fullscreen: <span id="fullscreen-status">–∞–∫—Ç–∏–≤–µ–Ω</span>
                        </span>
                    </div>
                </footer>
            </div>
        </div>

        <!-- Violation Screen Container - –°–™–ö–†–ê–¢–ï–ù -->
        <div id="violation-component" class="component-container">
            <div id="violation-screen" class="violation-overlay">
                <div class="violation-dialog">
                    <div class="violation-header">
                        <span class="violation-icon">Warning</span>
                        <h2 id="violation-title">–ù–∞—Ä—É—à–µ–Ω–∏–µ –Ω–∞ —Å–∏–≥—É—Ä–Ω–æ—Å—Ç—Ç–∞</h2>
                    </div>

                    <div class="violation-body">
                        <div id="violation-reason" class="violation-message">
                            –ò–∑–ø–∏—Ç—ä—Ç —Å–µ –ø—Ä–µ–∫—Ä–∞—Ç—è–≤–∞ –ø–æ—Ä–∞–¥–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –Ω–∞ –ø—Ä–∞–≤–∏–ª–∞—Ç–∞.
                        </div>

                        <div class="violation-warning">
                            –ò–∑–ø–∏—Ç—ä—Ç —Å–µ –∑–∞—Ç–≤–∞—Ä—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ. –ù—è–º–∞ –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç –∑–∞ –≤—Ä—ä—â–∞–Ω–µ.
                        </div>

                        <div class="violation-auto-close">
                            –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞—Ç–≤–∞—Ä—è–Ω–µ —Å–ª–µ–¥ <span id="violation-countdown">10</span> —Å–µ–∫—É–Ω–¥–∏...
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –∏–∑–ø–∏—Ç–∞...</div>
        </div>
    </div>

    <!-- Custom Dialog Container -->
    <div id="custom-dialog-container" class="dialog-container"></div>

    <!-- Core Application JavaScript - ES6 Modules -->
    <script type="module" src="/student/js/main.js"></script>

</body>

</html>