<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv=1764998127"X-UA-Compatible" content="IE=edge">
    <title>Exam Monitor - Student Interface</title>

    <link rel="icon" type="image/svg+xml" href="/favicon.svg">

    <script src="/socket.io/socket.io.js"></script>

    <link rel="stylesheet" href="/student/css/styles.css?v=1764998127">

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/editor/editor.main.css">

    <script>
        // This will be called after loader.min.js loads
        window.initMonacoLoader = function() {
            require.config({
                paths: {
                    'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs'
                }
            });

            window.waitForMonaco = function (callback) {
                if (typeof monaco !== 'undefined') {
                    callback();
                } else {
                    require(['vs/editor/editor.main'], function () {
                        callback();
                    });
                }
            };
        };
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js" onload="window.initMonacoLoader()"></script>
</head>

<body>
    <div id="app-container" class="app-container">
        <!-- Login Component -->
        <div id="login-component" class="component-container">
            <div class="login-container">
                <div class="login-form">
                    <h2 class="text-center mb-xxl">Programming Exam Login</h2>

                    <div class="form-group mb-lg">
                        <select id="student-class" class="input select" required>
                            <option value="">Select Class</option>
                            <option value="11А">11А</option>
                            <option value="11Б">11Б</option>
                            <option value="12А">12А</option>
                            <option value="12Б">12Б</option>
                        </select>
                    </div>

                    <div class="form-group mb-lg">
                        <select id="student-name" class="input select" required disabled>
                            <option value="">Select Your Name</option>
                        </select>
                    </div>

                    <button id="login-btn" class="btn btn-primary w-full" disabled>
                        Start Exam
                    </button>

                    <div id="login-status" class="status-message mt-xl"></div>
                </div>
            </div>
        </div>
        
        <div id="exam-component" class="component-container" style="display: none;">
            <div class="exam-container">
                <header class="exam-header">
                    <div class="exam-timer d-flex items-center gap-sm">
                        <span class="timer-label text-sm">Time left:</span>
                        <span id="exam-timer" class="timer-value font-mono text-lg font-bold">03:00:00</span>
                    </div>
        
                    <div class="exam-actions">
                        <button id="finish-exam-btn" class="btn btn-danger">
                            Send
                        </button>
                    </div>
                </header>
        
                <aside id="exam-sidebar" class="exam-sidebar">
                    <div class="sidebar-tabs">
                        <button class="sidebar-tab active" data-panel="files">Files</button>
                        <button class="sidebar-tab" data-panel="docs">Docs</button>
                    </div>

                    <div class="sidebar-content">
                        <div id="files-panel" class="sidebar-panel active">
                            <div class="panel-header">
                                <h3 class="text-sm font-medium m-0">Project Files</h3>
                            </div>
                            <div id="file-tree" class="file-tree">
                                <div class="file-tree-empty text-center text-muted p-xl">
                                    <div class="empty-title font-medium mb-sm">No Project Files</div>
                                    <div class="empty-subtitle text-sm">Create or upload files to start</div>
                                </div>
                            </div>
                        </div>

                        <div id="docs-panel" class="sidebar-panel">
                            <div class="panel-header">
                                <h3 class="text-sm font-medium m-0">JS Reference</h3>
                            </div>
                            <div class="docs-search">
                                <input type="text" id="docs-search-input" class="input input-sm" placeholder="Search docs...">
                            </div>
                            <div id="docs-content" class="docs-content">
                                <!-- Docs will be loaded here -->
                            </div>
                        </div>

                    </div>
                </aside>
        
                <main class="main-area">
                    <div class="editor-area">
                        <div class="editor-header">
                            <div class="editor-actions d-flex gap-xs">
                                <button id="run-btn" class="btn btn-sm btn-primary">Run</button>
                                <button id="start-server-btn" class="btn btn-sm btn-warning">Start Server</button>
                                <button id="format-btn" class="btn btn-sm btn-secondary">Format</button>
                                <button id="preview-btn" class="btn btn-sm btn-blue">Preview</button>
                            </div>
                        </div>
                        
                        <div id="file-tabs-container" class="tabs-container"></div>

                        <div class="editor-split-container">
                            <div id="monaco-editor" class="editor-main-panel"></div>

                            <div id="console-panel" class="console-panel">
                                <div class="console-header">
                                    <span class="console-title">Console</span>
                                    <button id="clear-console-btn" class="btn btn-xs btn-secondary">Clear</button>
                                </div>
                                <div id="console-output" class="console-output"></div>
                            </div>
                        </div>
                    </div>
        
                </main>
        
                <footer class="exam-footer">
                    <div class="footer-right d-flex items-center gap-md" style="margin-left: auto;">
                        <button class="btn btn-sm btn-warning" id="help-btn">Help</button>
                    </div>
                </footer>
            </div>
        </div>

        <!-- Exam Completion Component -->
        <div id="completion-component" class="component-container" style="display: none;">
            <div style="
                width: 100%;
                height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                animation: fadeIn 0.5s ease-out;
            ">
                <div style="
                    background: white;
                    border-radius: 20px;
                    padding: 3rem;
                    max-width: 600px;
                    width: 90%;
                    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.3);
                    text-align: center;
                    animation: slideUp 0.6s ease-out;
                ">
                    <div style="
                        font-size: 5rem;
                        margin-bottom: 1.5rem;
                        animation: bounceIn 1s ease-out;
                    "></div>

                    <h1 id="completion-title" style="
                        color: #2d3748;
                        font-size: 2.5rem;
                        font-weight: 700;
                        margin: 0 0 1rem 0;
                    ">Exam Completed!</h1>

                    <p id="completion-message" style="
                        color: #4a5568;
                        font-size: 1.25rem;
                        line-height: 1.6;
                        margin-bottom: 2.5rem;
                    ">Your solution has been submitted successfully.</p>

                    <div style="
                        background: #f7fafc;
                        border-radius: 12px;
                        padding: 2rem;
                        margin-bottom: 2rem;
                        border-left: 4px solid #667eea;
                    ">
                        <p style="
                            color: #2d3748;
                            font-size: 1rem;
                            margin: 0 0 1rem 0;
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                        ">
                            <strong style="color: #667eea;">Student:</strong>
                            <span id="completion-student-name" style="color: #4a5568;"></span>
                        </p>
                        <p style="
                            color: #2d3748;
                            font-size: 1rem;
                            margin: 0 0 1rem 0;
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                        ">
                            <strong style="color: #667eea;">Class:</strong>
                            <span id="completion-student-class" style="color: #4a5568;"></span>
                        </p>
                        <p style="
                            color: #2d3748;
                            font-size: 1rem;
                            margin: 0;
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                        ">
                            <strong style="color: #667eea;">Completed at:</strong>
                            <span id="completion-time" style="color: #4a5568;"></span>
                        </p>
                    </div>

                    <p style="
                        color: #718096;
                        font-size: 1rem;
                        margin: 0;
                        font-style: italic;
                    ">You can close this window now.</p>
                </div>
            </div>
        </div>

    </div>

    <script type="module" src="/student/js/main.js?v=1764999685"></script>
</body>

</html>