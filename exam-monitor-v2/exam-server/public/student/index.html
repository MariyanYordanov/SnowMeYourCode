<!DOCTYPE html>
<html lang="bg">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Programming Exam System</title>
    <!-- Socket.io -->
    <script src="/socket.io/socket.io.js"></script>
    <!-- CSS -->
    <link rel="stylesheet" href="student.css">

    <!-- Monaco Editor (CDN) -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/editor/editor.main.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
    </script>

</head>

<body>

    <div id="login-container" class="login-container">
        <h2>üéì –í—Ö–æ–¥ –≤ –∏–∑–ø–∏—Ç–∞ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–Ω–µ</h2>
    
        <div class="form-group">
            <input type="text" id="student-name" placeholder="–ò–º–µ –∏ —Ñ–∞–º–∏–ª–∏—è" required>
        </div>
    
        <div class="form-group">
            <select id="student-class" required>
                <option value="">–ò–∑–±–µ—Ä–µ—Ç–µ –∫–ª–∞—Å</option>
                <option value="11–ê">11–ê</option>
                <option value="11–ë">11–ë</option>
                <option value="12–ê">12–ê</option>
                <option value="12–ë">12–ë</option>
            </select>
        </div>
    
        <!-- NEW: Terms Agreement Section -->
        <div class="terms-section">
            <div class="terms-header">
                <h3>üìã –£—Å–ª–æ–≤–∏—è –Ω–∞ –∏–∑–ø–∏—Ç–∞</h3>
                <button type="button" id="terms-toggle" class="terms-toggle-btn">
                    üìñ –ü–æ–∫–∞–∂–∏ —É—Å–ª–æ–≤–∏—è—Ç–∞
                </button>
            </div>
    
            <!-- Terms Content (Hidden by default) -->
            <div id="terms-content" class="terms-content" style="display: none;">    
                
                <!-- Enhanced Terms with NO-TOUCH POLICY -->
                <!-- Replace the existing terms-text section -->
                
                <div class="terms-text">
                    <h4>üö´ –ê–í–¢–û–ú–ê–¢–ò–ß–ù–û –ü–†–ï–ö–†–ê–¢–Ø–í–ê–ù–ï –ø—Ä–∏:</h4>
                    <ul class="violation-list">
                        <li><strong>–ò–∑–ª–∏–∑–∞–Ω–µ –æ—Ç fullscreen —Ä–µ–∂–∏–º</strong></li>
                        <li><strong>–°–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ–∑–æ—Ä–µ—Ü–∞</strong> –Ω–∞ –∏–∑–ø–∏—Ç–∞</li>
                        <li><strong>–ü—Ä–µ–≤–∫–ª—é—á–≤–∞–Ω–µ –∫—ä–º –¥—Ä—É–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</strong> –∏–ª–∏ –ø—Ä–æ–∑–æ—Ä—Ü–∏</li>
                        <li><strong>–ö–æ–ø–∏—Ä–∞–Ω–µ/–ø–æ—Å—Ç–∞–≤—è–Ω–µ –Ω–∞ –∫–æ–¥</strong> –æ—Ç –≤—ä–Ω—à–Ω–∏ –∏—Å—Ç–æ—á–Ω–∏—Ü–∏</li>
                        <li class="touch-violation"><strong>–î–û–ö–û–°–í–ê–ù–ï –ù–ê –ï–ö–†–ê–ù–ê</strong> (touch events)</li>
                    </ul>
                
                    <!-- CRITICAL: Touch Policy Section -->
                    <div class="no-touch-policy">
                        <h4>üì± –í–ê–ñ–ù–û: TOUCH –í–ó–ê–ò–ú–û–î–ï–ô–°–¢–í–ò–ï –ó–ê–ë–†–ê–ù–ï–ù–û</h4>
                        <div class="touch-policy-content">
                            <p><strong>üö´ –í–°–Ø–ö–û –î–û–ö–û–°–í–ê–ù–ï = –ê–í–¢–û–ú–ê–¢–ò–ß–ù–û –ò–ó–ì–û–ù–í–ê–ù–ï</strong></p>
                            <ul class="touch-rules">
                                <li>–ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ <strong>–°–ê–ú–û –º–∏—à–∫–∞ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞</strong></li>
                                <li>Touch screens <strong>–ù–ï –°–ê –ü–û–ó–í–û–õ–ï–ù–ò</strong></li>
                                <li>–¢–∞–±–ª–µ—Ç–∏ –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∏ <strong>–ù–ï –°–ê –ü–û–î–•–û–î–Ø–©–ò</strong> –∑–∞ –∏–∑–ø–∏—Ç–∞</li>
                                <li>–í—Å–µ–∫–∏ touch event —Å–µ –∑–∞—Å–∏—á–∞ <strong>–ú–û–ú–ï–ù–¢–ê–õ–ù–û</strong></li>
                            </ul>
                
                            <div class="device-requirement">
                                <strong>üíª –ó–ê–î–™–õ–ñ–ò–¢–ï–õ–ù–û:</strong> –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ –Ω–∞—Å—Ç–æ–ª–µ–Ω –∫–æ–º–ø—é—Ç—ä—Ä –∏–ª–∏ –ª–∞–ø—Ç–æ–ø
                                —Å —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∏ –º–∏—à–∫–∞ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞. –ù–∏–∫–∞–∫–≤–∏ touch –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –Ω–µ —Å–∞ –ø–æ–∑–≤–æ–ª–µ–Ω–∏.
                            </div>
                        </div>
                    </div>
                
                    <!-- Platform-Specific Details -->
                    <div class="platform-details">
                        <h5>üíª Windows –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ - –∑–∞–±—Ä–∞–Ω–µ–Ω–∏ –∫–ª–∞–≤–∏—à–∏:</h5>
                        <ul class="platform-list">
                            <li><strong>ESC</strong> - –∏–∑–ª–∏–∑–∞–Ω–µ –æ—Ç fullscreen</li>
                            <li><strong>Alt+Tab</strong> - –ø—Ä–µ–≤–∫–ª—é—á–≤–∞–Ω–µ –º–µ–∂–¥—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</li>
                            <li><strong>Windows –∫–ª–∞–≤–∏—à</strong> - –æ—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ Start menu</li>
                            <li><strong>F11</strong> - toggle fullscreen</li>
                            <li><strong>Ctrl+Alt+Delete</strong> - Task Manager</li>
                        </ul>
                
                        <h5>üçé Mac –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ - –∑–∞–±—Ä–∞–Ω–µ–Ω–∏ –∫–ª–∞–≤–∏—à–∏/–∂–µ—Å—Ç–æ–≤–µ:</h5>
                        <ul class="platform-list">
                            <li><strong>Cmd+Control+F</strong> - toggle fullscreen</li>
                            <li><strong>Cmd+Tab</strong> - –ø—Ä–µ–≤–∫–ª—é—á–≤–∞–Ω–µ –º–µ–∂–¥—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</li>
                            <li><strong>Green button</strong> (traffic light) - –∏–∑–ª–∏–∑–∞–Ω–µ –æ—Ç fullscreen</li>
                            <li><strong>Trackpad gestures</strong> - swipe between spaces</li>
                            <li><strong>Hot corners</strong> - –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ –Ω–∞ Mission Control/Desktop</li>
                        </ul>
                
                        <h5>üêß Linux –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ - –∑–∞–±—Ä–∞–Ω–µ–Ω–∏ –∫–ª–∞–≤–∏—à–∏:</h5>
                        <ul class="platform-list">
                            <li><strong>Super key</strong> (Windows equivalent) - –æ—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ Activities</li>
                            <li><strong>Alt+Tab</strong> - –ø—Ä–µ–≤–∫–ª—é—á–≤–∞–Ω–µ –º–µ–∂–¥—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</li>
                            <li><strong>F11</strong> - toggle fullscreen</li>
                            <li><strong>Workspace switching</strong> - Ctrl+Alt+Arrow</li>
                        </ul>
                    </div>
                
                    <h4>‚úÖ –†–ê–ó–†–ï–®–ï–ù–ò –î–ï–ô–°–¢–í–ò–Ø:</h4>
                    <ul class="allowed-list">
                        <li><strong>–ö–æ–¥–∏—Ä–∞–Ω–µ</strong> –≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–µ–Ω–∏—è —Ä–µ–¥–∞–∫—Ç–æ—Ä</li>
                        <li><strong>–ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ console.log</strong> –∑–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ –∏ debugging</li>
                        <li><strong>–§–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∫–æ–¥–∞</strong> —Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–µ–Ω–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏</li>
                        <li><strong>Developer Tools</strong> –≤ —Ä–∞–º–∫–∏—Ç–µ –Ω–∞ fullscreen —Ä–µ–∂–∏–º–∞</li>
                        <li><strong>–ú–∏—à–∫–∞ –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞</strong> –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –°–ê–ú–û</li>
                    </ul>
                
                    <!-- Platform-Specific Allowed Actions -->
                    <div class="platform-details allowed-details">
                        <h5>‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–∏ –∫–ª–∞–≤–∏—à–∏ –∑–∞ —Å–º—è–Ω–∞ –Ω–∞ –µ–∑–∏–∫:</h5>
                        <ul class="platform-list allowed">
                            <li><strong>Windows:</strong> Windows+Space, Alt+Shift</li>
                            <li><strong>Mac:</strong> Cmd+Space (Spotlight), Control+Space</li>
                            <li><strong>Linux:</strong> Super+Space, Alt+Shift (–∑–∞–≤–∏—Å–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ)</li>
                        </ul>
                    </div>
                
                    <div class="warning-box">
                        <strong>‚ö†Ô∏è –í–ê–ñ–ù–û:</strong> –ü—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –∏–∑–ø–∏—Ç—ä—Ç —Å–µ –ø—Ä–µ–∫—Ä–∞—Ç—è–≤–∞ <strong>–ê–í–¢–û–ú–ê–¢–ò–ß–ù–û</strong>
                        –±–µ–∑ –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç –∑–∞ –≤—Ä—ä—â–∞–Ω–µ! –°–∏—Å—Ç–µ–º–∞—Ç–∞ –∑–∞—Å–∏—á–∞ –≤—Å–∏—á–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ -
                        –≤–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ touch events, –∏–∑–ª–∏–∑–∞–Ω–µ –æ—Ç fullscreen –∏ –ø—Ä–µ–≤–∫–ª—é—á–≤–∞–Ω–µ –º–µ–∂–¥—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
                    </div>
                
                    <div class="info-box">
                        <strong>‚ÑπÔ∏è –î–û–ü–™–õ–ù–ò–¢–ï–õ–ù–û:</strong> –í—Ä–µ–º–µ—Ç–æ –∑–∞ –∏–∑–ø–∏—Ç–∞ –µ <strong>3 —á–∞—Å–∞</strong>.
                        –ö–æ–¥—ä—Ç —Å–µ –∑–∞–ø–∞–∑–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞ –≤—Å–µ–∫–∏ 2 —Å–µ–∫—É–Ω–¥–∏. –°–ª–µ–¥ –ø—Ä–∏–∫–ª—é—á–≤–∞–Ω–µ –Ω–∞ –∏–∑–ø–∏—Ç–∞
                        –Ω—è–º–∞ –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç –∑–∞ –≤—Ä—ä—â–∞–Ω–µ –∏–ª–∏ –ø—Ä–æ–º–µ–Ω–∏. –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ –Ω–∞—Å—Ç–æ–ª–µ–Ω –∫–æ–º–ø—é—Ç—ä—Ä –∑–∞ –Ω–∞–π-–¥–æ–±—ä—Ä –æ–ø–∏—Ç.
                    </div>
                
                    <div class="tech-info">
                        <strong>üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ê –ò–ù–§–û–†–ú–ê–¶–ò–Ø:</strong> –°–∏—Å—Ç–µ–º–∞—Ç–∞ –∏–∑–ø–æ–ª–∑–≤–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏ web APIs
                        –∑–∞ –¥–µ—Ç–µ–∫—Ü–∏—è –Ω–∞ fullscreen —Å—ä—Å—Ç–æ—è–Ω–∏–µ—Ç–æ –∏ touch events. –†–∞–±–æ—Ç–∏ –Ω–∞ –≤—Å–∏—á–∫–∏ modern browsers
                        –Ω–æ –∏–∑–∏—Å–∫–≤–∞ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∏ input devices (–º–∏—à–∫–∞ + –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞).
                </div>
                </div>
            </div>
    
            <!-- Agreement Checkbox -->
            <div class="agreement-checkbox">
                <label class="checkbox-label">
                    <input type="checkbox" id="terms-agreement" required>
                    <span class="checkmark"></span>
                    <span class="checkbox-text">
                        –ü—Ä–æ—á–µ—Ç–æ—Ö –∏ —Å–µ <strong>—Å—ä–≥–ª–∞—Å—è–≤–∞–º —Å —É—Å–ª–æ–≤–∏—è—Ç–∞</strong> –Ω–∞ –∏–∑–ø–∏—Ç–∞.
                        –†–∞–∑–±–∏—Ä–∞–º —á–µ –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –∏–∑–ø–∏—Ç—ä—Ç —Å–µ –ø—Ä–µ–∫—Ä–∞—Ç—è–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.
                    </span>
                </label>
            </div>
        </div>
    
        <!-- Enhanced Login Button -->
        <button id="login-btn" class="btn-primary" disabled>
            üöÄ –í–ª–µ–∑ –≤ –∏–∑–ø–∏—Ç–∞
        </button>
    
        <div id="login-status" class="status-message"></div>
    </div>

    <!-- Fullscreen Exam Container -->
    <div id="exam-container" class="exam-container" style="display: none;">
        <!-- Header -->
        <div class="exam-header">
            <div class="student-info">
                <span>–°—Ç—É–¥–µ–Ω—Ç: <strong id="student-name-display"></strong></span>
                <span>–ö–ª–∞—Å: <strong id="student-class-display"></strong></span>
                <span>ID: <strong id="session-id-display"></strong></span>
            </div>

            <div class="exam-timer">
                <span class="timer-icon">‚è±Ô∏è</span>
                <span id="timer-display">03:00:00</span>
            </div>
        </div>

        <!-- Main Content -->
        <div class="exam-content">
            <!-- Code Editor Panel -->
            <div class="editor-panel">
                <div class="panel-header">
                    <h3>üìù –ö–æ–¥ –†–µ–¥–∞–∫—Ç–æ—Ä</h3>
                    <div class="editor-controls">
                        <button id="run-code-btn" class="btn-success">‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç–∏—Ä–∞–π</button>
                        <button id="format-code-btn" class="btn-primary">üé® –§–æ—Ä–º–∞—Ç–∏—Ä–∞–π</button>
                        <button id="clear-output-btn" class="btn-secondary">üóëÔ∏è –ò–∑—á–∏—Å—Ç–∏</button>
                        <select id="theme-selector">
                            <option value="vs-dark">Dark</option>
                            <option value="vs">Light</option>
                            <option value="hc-black">High Contrast</option>
                        </select>
                    </div>
                </div>

                <!-- Monaco Editor -->
                <div id="monaco-editor" class="monaco-container"></div>
            </div>

            <!-- Output Panel -->
            <div class="output-panel">
                <div class="panel-header">
                    <h3>üñ•Ô∏è –†–µ–∑—É–ª—Ç–∞—Ç</h3>
                </div>

                <div id="code-output" class="code-output">
                    <div class="output-placeholder">
                        –†–µ–∑—É–ª—Ç–∞—Ç—ä—Ç –æ—Ç –≤–∞—à–∏—è –∫–æ–¥ —â–µ —Å–µ –ø–æ–∫–∞–∂–µ —Ç—É–∫...
                    </div>
                </div>

                <!-- Error Panel -->
                <div id="error-panel" class="error-panel" style="display: none;">
                    <div class="error-header">‚ùå –ì—Ä–µ—à–∫–∞ –≤ –∫–æ–¥–∞</div>
                    <div id="error-content" class="error-content"></div>
                </div>

                <!-- Execution Info Display -->
                <div id="execution-info" style="display: none;"></div>
            </div>
        </div>

        <!-- Footer -->
        <div class="exam-footer">
            <div class="exam-status">
                <span id="last-saved">–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø–∞–∑–≤–∞–Ω–µ –∞–∫—Ç–∏–≤–Ω–æ</span>
                <span id="connection-status" class="status-connected">‚óè –°–≤—ä—Ä–∑–∞–Ω</span>
                <span id="fullscreen-status">üîí Fullscreen –∞–∫—Ç–∏–≤–µ–Ω</span>
            </div>

            <button id="finish-exam-btn" class="btn-danger">
                üèÅ –ü—Ä–∏–∫–ª—é—á–∏ –∏–∑–ø–∏—Ç–∞
            </button>
        </div>
    </div>

    <!-- Red Violation Screen -->
    <div id="violation-screen" class="violation-overlay" style="display: none;">
        <div class="violation-dialog">
            <div class="violation-header">
                <div class="violation-icon">üö´</div>
                <h2>–ó–ê–°–ï–ß–ï–ù–û –ù–ê–†–£–®–ï–ù–ò–ï</h2>
            </div>

            <div class="violation-body">
                <p id="violation-reason" class="violation-message">
                    –ü—Ä–∏—á–∏–Ω–∞ –∑–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–µ—Ç–æ —â–µ —Å–µ –ø–æ–∫–∞–∂–µ —Ç—É–∫
                </p>
                <p class="violation-warning">
                    –í—Å–∏—á–∫–∏ –¥–µ–π—Å—Ç–≤–∏—è —Å–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–Ω–∏.
                </p>
            </div>

            <div class="violation-actions">
                <button id="continue-exam-btn" class="btn-warning">
                    ‚ö†Ô∏è –ü—Ä–æ–¥—ä–ª–∂–∏ –∏–∑–ø–∏—Ç–∞
                </button>
                <button id="exit-violation-btn" class="btn-danger">
                    üö™ –ù–∞–ø—É—Å–Ω–∏ –∏–∑–ø–∏—Ç–∞
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>–ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –∏–∑–ø–∏—Ç–∞...</p>
        </div>
    </div>

    <!-- Custom Dialog Container -->
    <div id="custom-dialog-container"></div>

    <!-- Main JavaScript -->
    <script type="module" src="js/main.js"></script>
</body>

</html>