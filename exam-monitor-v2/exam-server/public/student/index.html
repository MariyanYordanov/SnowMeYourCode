<!DOCTYPE html>
<html lang="bg">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Programming Exam System</title>

    <!-- External CSS -->
    <link rel="stylesheet" href="../shared/css/common.css">
    <link rel="stylesheet" href="css/student.css">
    <link rel="stylesheet" href="css/editor.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/anti-cheat.css">

    <!-- Anti-cheat specific CSS -->
    <link rel="stylesheet" href="css/anti-cheat/warning-dialogs.css">
    <link rel="stylesheet" href="css/anti-cheat/notifications.css">
    <link rel="stylesheet" href="css/anti-cheat/overlays.css">

    <!-- Socket.io -->
    <script src="/socket.io/socket.io.js"></script>
</head>

<body>
    <!-- Login Container -->
    <div id="login-container" class="login-container">
        <div class="login-form">
            <h2>üéì –í—Ö–æ–¥ –≤ –∏–∑–ø–∏—Ç–∞ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–Ω–µ</h2>

            <div class="form-group">
                <input type="text" id="student-name" class="form-control" placeholder="–ò–º–µ –∏ —Ñ–∞–º–∏–ª–∏—è" autocomplete="off"
                    required>
            </div>

            <div class="form-group">
                <select id="student-class" class="form-control" required>
                    <option value="">–ò–∑–±–µ—Ä–µ—Ç–µ –∫–ª–∞—Å</option>
                    <option value="11–ê">11–ê</option>
                    <option value="11–ë">11–ë</option>
                    <option value="11–í">11–í</option>
                    <option value="12–ê">12–ê</option>
                    <option value="12–ë">12–ë</option>
                </select>
            </div>

            <button id="login-btn" class="btn btn-primary btn-block">
                üöÄ –í–ª–µ–∑ –≤ –∏–∑–ø–∏—Ç–∞
            </button>

            <div id="login-status" class="status-message"></div>
        </div>
    </div>

    <!-- Exam Container -->
    <div id="exam-container" class="exam-container" style="display: none;">
        <!-- Exam Header -->
        <div class="exam-header">
            <div class="student-info">
                <span class="info-label">–°—Ç—É–¥–µ–Ω—Ç:</span>
                <span id="student-name-display" class="info-value"></span>
                <span class="info-separator">|</span>
                <span class="info-label">–ö–ª–∞—Å:</span>
                <span id="student-class-display" class="info-value"></span>
                <span class="info-separator">|</span>
                <span class="info-label">ID:</span>
                <span id="session-id-display" class="info-value"></span>
            </div>

            <div id="exam-timer" class="exam-timer">
                <span class="timer-icon">‚è±Ô∏è</span>
                <span id="timer-display">03:00:00</span>
            </div>
        </div>

        <!-- Main Exam Content -->
        <div class="exam-content">
            <!-- Code Editor Section -->
            <div class="editor-section">
                <div class="editor-header">
                    <h3>üìù –ö–æ–¥ –†–µ–¥–∞–∫—Ç–æ—Ä</h3>
                    <div class="editor-controls">
                        <button id="run-code-btn" class="btn btn-success">
                            ‚ñ∂Ô∏è Run
                        </button>
                        <button id="format-code-btn" class="btn btn-primary">
                            üé® Format
                        </button>
                        <button id="save-code-btn" class="btn btn-secondary">
                            üíæ Save
                        </button>
                    </div>
                </div>

                <textarea id="code-editor" class="code-editor" placeholder="// –ù–∞–ø–∏—à–µ—Ç–µ –≤–∞—à–∏—è—Ç –∫–æ–¥ —Ç—É–∫..."
                    spellcheck="false"></textarea>
            </div>

            <!-- Output Section -->
            <div class="output-section">
                <div class="output-header">
                    <h3>üñ•Ô∏è Console Output</h3>
                    <button id="clear-output-btn" class="btn btn-secondary">
                        üóëÔ∏è Clear
                    </button>
                </div>

                <div id="code-output" class="code-output">
                    <div class="output-placeholder">
                        Your code output will appear here...

                        Use console.log() to display results.
                    </div>
                </div>
            </div>
        </div>

        <!-- Exam Footer -->
        <div class="exam-footer">
            <div class="exam-status">
                <span id="last-saved-display" class="status-item">
                    Last saved: Never
                </span>
                <span class="status-separator">|</span>
                <span id="connection-status" class="status-item">
                    <span class="connection-dot"></span>
                    Connected
                </span>
            </div>

            <button id="finish-exam-btn" class="btn btn-danger">
                üèÅ Finish Exam
            </button>
        </div>
    </div>

    <!-- Error Container -->
    <div id="error-container" class="error-message" style="display: none;"></div>

    <!-- Anti-cheat Warning Overlay (hidden by default) -->
    <div id="antiCheatOverlay" class="anti-cheat-overlay" style="display: none;"></div>

    <!-- Legacy AntiCheat (temporary until full migration) -->
    <script src="js/AntiCheat.js"></script>

    <!-- NEW Refactored Entry Point -->
    <script type="module" src="js/main.js"></script>
</body>

</html>