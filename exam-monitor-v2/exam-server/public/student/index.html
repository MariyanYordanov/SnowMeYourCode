<!DOCTYPE html>
<html lang="bg">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Exam Monitor - Student Interface</title>

    <script src="/socket.io/socket.io.js"></script>

    <link rel="stylesheet" href="/student/css/styles.css">

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/editor/editor.main.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>

    <script>
        require.config({
            paths: {
                'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs'
            }
        });

        window.waitForMonaco = function (callback) {
            if (typeof monaco !== 'undefined') {
                callback();
            } else {
                require(['vs/editor/editor.main'], function () {
                    callback();
                });
            }
        };
    </script>
</head>

<body>
    <div id="app-container" class="app-container">
        <div id="login-component" class="component-container">
            <div class="login-container">
                <div class="terms-section">
                    
                    <div class="terms-content p-xxl">
                        <div class="terms-text">
                            <h4 class="text-md font-semibold mb-lg">‚ùå –ó–∞–±—Ä–∞–Ω–µ–Ω–∏ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ –≤—Ä–µ–º–µ –Ω–∞ –∏–∑–ø–∏—Ç–∞:</h4>

                            <ol class="violation-list">
                                <li><strong>–°–º—è–Ω–∞ –Ω–∞ –ø—Ä–æ–∑–æ—Ä—Ü–∏/—Ç–∞–±–æ–≤–µ:</strong> –ù–∞–ø—É—Å–∫–∞–Ω–µ –Ω–∞ –∏–∑–ø–∏—Ç–Ω–∏—è –ø—Ä–æ–∑–æ—Ä–µ—Ü</li>
                                <li><strong>–ö–æ–ø–∏—Ä–∞–Ω–µ –æ—Ç –≤—ä–Ω—à–Ω–∏ –∏–∑—Ç–æ—á–Ω–∏—Ü–∏:</strong> –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ clipboard –æ—Ç –¥—Ä—É–≥–∏
                                    –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</li>
                                <li><strong>–û—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ DevTools:</strong> F12, Ctrl+Shift+I –∏–ª–∏ –¥–µ—Å–µ–Ω –±—É—Ç–æ–Ω</li>
                                <li><strong>–ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ –≥–æ—Ä–µ—â–∏ –∫–ª–∞–≤–∏—à–∏:</strong> Alt+Tab, Win+Tab, Ctrl+Alt+Del</li>
                                <li><strong>–î–æ—Å—Ç—ä–ø –¥–æ –¥—Ä—É–≥–∏ –ø—Ä–æ–≥—Ä–∞–º–∏:</strong> IDE, –±—Ä–∞—É–∑—ä—Ä–∏, —á–∞—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</li>
                                <li><strong>–í—Ä—ä–∑–∫–∞ —Å –¥—Ä—É–≥–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:</strong> TeamViewer, AnyDesk, Remote Desktop</li>
                                <li><strong>–ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ AI –∞—Å–∏—Å—Ç–µ–Ω—Ç–∏:</strong> ChatGPT, GitHub Copilot, Bard</li>
                                <li><strong>–ö–æ–º—É–Ω–∏–∫–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏ –ª–∏—Ü–∞:</strong> –ü–æ –≤—Å—è–∫–∞–∫—ä–≤ –Ω–∞—á–∏–Ω</li>
                            </ol>

                            <h4 class="text-md font-semibold mb-lg mt-xl">‚úÖ –ü–æ–∑–≤–æ–ª–µ–Ω–∏ –¥–µ–π—Å—Ç–≤–∏—è:</h4>

                            <ol class="allowed-list">
                                <li>–ü–∏—Å–∞–Ω–µ –Ω–∞ –∫–æ–¥ –≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–µ–Ω–∏—è —Ä–µ–¥–∞–∫—Ç–æ—Ä</li>
                                <li>–ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ –≤–≥—Ä–∞–¥–µ–Ω–∞—Ç–∞ –∫–æ–Ω–∑–æ–ª–∞ –∑–∞ –¥–µ–±—ä–≥–≤–∞–Ω–µ</li>
                                <li>–ü—Ä–µ–≥–ª–µ–¥ –Ω–∞ MDN –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ Exam Dev Tools</li>
                                <li>–°—ä–∑–¥–∞–≤–∞–Ω–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Ñ–∞–π–ª–æ–≤–µ –≤ –ø—Ä–æ–µ–∫—Ç–∞</li>
                            </ol>

                            <p class="warning-text mt-xl p-lg rounded bg-danger text-white">
                                <strong>‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï:</strong> –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–µ, –∏–∑–ø–∏—Ç—ä—Ç —Å–µ –ø—Ä–µ–∫—Ä–∞—Ç—è–≤–∞
                                –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏ —Å–µ –æ—Ü–µ–Ω—è–≤–∞ —Å—ä—Å —Å–ª–∞–±–∞ –æ—Ü–µ–Ω–∫–∞!
                            </p>
                        </div>

                        <div class="agreement-checkbox mt-xl p-lg rounded">
                            <label class="checkbox-label d-flex gap-md cursor-pointer">
                                <input type="checkbox" id="terms-agreement" class="checkbox">
                                <span class="checkbox-text">
                                    <strong>–ü—Ä–æ—á–µ—Ç–æ—Ö –∏ —Å–µ —Å—ä–≥–ª–∞—Å—è–≤–∞–º —Å —É—Å–ª–æ–≤–∏—è—Ç–∞.</strong>
                                    –†–∞–∑–±–∏—Ä–∞–º, —á–µ –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –∏–∑–ø–∏—Ç—ä—Ç —Å–µ –ø—Ä–µ–∫—Ä–∞—Ç—è–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.
                                </span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="login-form">
                    <h2 class="text-center mb-xxl">–í—Ö–æ–¥ –≤ –∏–∑–ø–∏—Ç–∞ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–Ω–µ</h2>

                    <div class="form-group mb-lg">
                        <input type="text" id="student-name" class="input" placeholder="–ò–º–µ –∏ —Ñ–∞–º–∏–ª–∏—è" required>
                    </div>

                    <div class="form-group mb-lg">
                        <select id="student-class" class="input select" required>
                            <option value="">–ò–∑–±–µ—Ä–µ—Ç–µ –∫–ª–∞—Å</option>
                            <option value="11–ê">11–ê</option>
                            <option value="11–ë">11–ë</option>
                            <option value="12–ê">12–ê</option>
                            <option value="12–ë">12–ë</option>
                        </select>
                    </div>

                    <button id="login-btn" class="btn btn-primary w-100" disabled>
                        –í–ª–µ–∑ –≤ –∏–∑–ø–∏—Ç–∞
                    </button>

                    <div id="login-status" class="status-message mt-lg"></div>
                </div>
            </div>
        </div>

        <div id="exam-component" class="component-container" style="display: none;">
            <div class="exam-container">
                <header class="exam-header">
                    <div class="exam-info d-flex gap-lg items-center">
                        <span class="student-name text-sm font-medium"></span>
                        <span class="student-class text-sm"></span>
                        <span class="session-id text-xs text-muted"></span>
                    </div>

                    <div class="exam-timer d-flex items-center gap-sm">
                        <span class="timer-label text-sm">Time left:</span>
                        <span id="exam-timer" class="timer-value font-mono text-lg font-bold">03:00:00</span>
                    </div>

                    <div class="layout-controls d-flex gap-xs">
                        <button id="toggle-files" class="btn btn-sm active" title="Toggle Files Panel (Ctrl+1)">
                            Files
                        </button>
                        <button id="toggle-devtools" class="btn btn-sm active" title="Toggle DevTools (Ctrl+2)">
                            DevTools
                        </button>
                    </div>

                    <div class="exam-actions">
                        <button id="finish-exam-btn" class="btn btn-danger">
                            Send
                        </button>
                    </div>
                </header>

                <aside class="files-panel">
                    <div class="panel-header">
                        <h3 class="text-sm font-medium m-0">Project Files</h3>
                        <div class="file-toolbar d-flex gap-xs">
                            <button id="new-file-btn" class="btn btn-icon btn-sm" title="New File">üìÑ</button>
                            <button class="btn btn-icon btn-sm" title="Upload Files">‚¨ÜÔ∏è</button>
                            <button class="btn btn-icon btn-sm" title="Refresh">üîÑ</button>
                        </div>
                    </div>
                    <div class="panel-content">
                        <div id="file-tree" class="file-tree">
                            <div class="file-tree-empty text-center text-muted p-xl">
                                <div class="empty-icon text-xxl mb-md opacity-50">üìÅ</div>
                                <div class="empty-title font-medium mb-sm">No Project Files</div>
                                <div class="empty-subtitle text-sm">Create or upload files to start</div>
                            </div>
                        </div>
                    </div>
                </aside>

                <div class="editor-panel">
                    <div class="editor-header">
                        <div id="file-tabs-container" class="tabs-container"></div>
                        <div class="editor-actions d-flex gap-xs">
                            <button id="run-btn" class="btn btn-sm btn-primary">‚ñ∂ Run</button>
                            <button id="save-btn" class="btn btn-sm">üíæ Save</button>
                            <button id="format-btn" class="btn btn-sm">‚ö° Format</button>
                            <select id="theme-selector" class="select text-xs">
                                <option value="vs-dark">Dark</option>
                                <option value="vs">Light</option>
                                <option value="hc-black">High Contrast</option>
                            </select>
                        </div>
                    </div>

                    <div id="monaco-editor" class="flex-1"></div>

                    <div class="editor-footer d-flex justify-between items-center px-md py-xs bg-panel border-top">
                        <div class="editor-status d-flex gap-lg text-xs text-muted">
                            <span id="cursor-position">Ln 1, Col 1</span>
                            <span id="file-language">JavaScript</span>
                            <span id="encoding">UTF-8</span>
                        </div>
                        <div class="editor-info d-flex gap-lg text-xs">
                            <span id="word-count">0 words</span>
                            <span id="char-count">0 chars</span>
                        </div>
                    </div>
                </div>

                <aside class="devtools-panel">
                    <div class="devtools-tabs">
                        <button class="devtool-tab active" data-tab="console">Console</button>
                        <button class="devtool-tab" data-tab="network">Network</button>
                        <button class="devtool-tab" data-tab="storage">Storage</button>
                        <button class="devtool-tab" data-tab="elements">Elements</button>
                        <button class="devtool-tab" data-tab="sources">Sources</button>
                        <button class="devtool-tab" data-tab="mdn">MDN Docs</button>
                    </div>

                    <div class="devtools-content">
                        <div id="console-panel" class="devtool-panel active">
                            <div class="console-header d-flex justify-between items-center p-sm border-bottom">
                                <div class="console-filters d-flex gap-xs">
                                    <button class="filter-chip active text-xs">All</button>
                                    <button class="filter-chip text-xs">Logs</button>
                                    <button class="filter-chip text-xs">Errors</button>
                                    <button class="filter-chip text-xs">Warnings</button>
                                </div>
                                <button id="clear-console" class="btn btn-icon btn-sm"
                                    title="Clear console">üóëÔ∏è</button>
                            </div>
                            <div id="console-output" class="console-output"></div>
                        </div>

                        <div id="network-panel" class="devtool-panel d-none">
                            <div class="network-content">
                                <table class="network-table">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Status</th>
                                            <th>Type</th>
                                            <th>Size</th>
                                            <th>Time</th>
                                        </tr>
                                    </thead>
                                    <tbody id="network-requests"></tbody>
                                </table>
                            </div>
                        </div>

                        <div id="storage-panel" class="devtool-panel d-none">
                            <div class="storage-empty devtools-empty">
                                <div class="empty-icon">üíæ</div>
                                <div class="empty-title">No Storage Data</div>
                                <div class="empty-description">Local storage and session storage will appear here</div>
                            </div>
                        </div>

                        <div id="elements-panel" class="devtool-panel d-none">
                            <div class="elements-empty devtools-empty">
                                <div class="empty-icon">üèóÔ∏è</div>
                                <div class="empty-title">DOM Inspector</div>
                                <div class="empty-description">Coming soon...</div>
                            </div>
                        </div>

                        <div id="sources-panel" class="devtool-panel d-none">
                            <div class="sources-empty devtools-empty">
                                <div class="empty-icon">üìÑ</div>
                                <div class="empty-title">Sources Panel</div>
                                <div class="empty-description">View your project files here</div>
                            </div>
                        </div>

                        <div id="mdn-panel" class="devtool-panel d-none">
                            <div class="mdn-tabs tabs-container">
                                <button class="tab active" data-section="javascript">JavaScript</button>
                                <button class="tab" data-section="dom">DOM API</button>
                                <button class="tab" data-section="css">CSS</button>
                                <button class="tab" data-section="html">HTML</button>
                            </div>
                            <div class="mdn-content p-md overflow-y-auto"></div>
                        </div>
                    </div>
                </aside>

                <div class="resizer" id="resizer-devtools"></div>

                <div class="project-runner-panel">
                    <div class="panel-header">
                        <h3>Project Output</h3>
                        <div class="panel-controls">
                            <button id="run-project-btn" class="control-btn">Run Project</button>
                            <button id="stop-project-btn" class="control-btn">Stop</button>
                        </div>
                    </div>
                    <div class="panel-content">
                        <iframe id="project-iframe" class="project-iframe" sandbox="allow-scripts allow-same-origin allow-popups allow-forms allow-pointer-lock allow-downloads allow-modals"></iframe>
                    </div>
                </div>

                <footer class="exam-footer">
                    <div class="footer-left d-flex items-center gap-md">
                        <span class="connection-status d-flex items-center gap-xs">
                            <span class="status-indicator"></span>
                            <span class="status-text text-xs">Connected</span>
                        </span>
                        <span class="server-info text-xs text-muted">Server: exam-server:8080</span>
                    </div>

                    <div class="footer-center">
                        <span class="exam-progress text-xs">
                            <span id="completed-tasks">0</span> / <span id="total-tasks">5</span> tasks completed
                        </span>
                    </div>

                    <div class="footer-right d-flex items-center gap-md">
                        <button class="btn btn-sm" id="help-btn">‚ùì Help</button>
                        <span class="version-info text-xs text-muted">v2.0.0</span>
                    </div>
                </footer>
            </div>
        </div>
    </div>

    <div id="violation-overlay" class="violation-overlay d-none">
        <div class="violation-content">
            <div class="violation-icon">‚ö†Ô∏è</div>
            <h2 class="violation-title">–ò–∑–ø–∏—Ç—ä—Ç –µ –ø—Ä–µ–∫—Ä–∞—Ç–µ–Ω!</h2>
            <p class="violation-message mb-xl"></p>
            <button class="btn btn-danger" onclick="window.location.reload()">–ó–∞—Ç–≤–æ—Ä–∏</button>
        </div>
    </div>

    <script type="module" src="/student/js/main.js"></script>
</body>

</html>